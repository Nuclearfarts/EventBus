apply plugin: 'maven'
apply plugin: 'java-library'
apply plugin: 'eclipse'
apply plugin: 'maven-publish'

sourceCompatibility = 1.8
version = '0.1.0'

def ENV = System.getenv()
if (ENV.BUILD_NUMBER) {
	version = version + "." + "${System.getenv().BUILD_NUMBER}"
}

group 'net.coderbot'
archivesBaseName = 'patchwork-eventbus'

repositories {
	mavenCentral()
}

dependencies {
	implementation 'org.ow2.asm:asm:6.2'
	implementation 'org.ow2.asm:asm-commons:6.2'
	implementation 'org.ow2.asm:asm-tree:6.2'
	implementation 'org.apache.logging.log4j:log4j-api:2.11.+'
	implementation 'com.google.code.findbugs:jsr305:3.0.2'
	api 'net.jodah:typetools:0.6.0'
}

task sourcesJar(type: Jar, dependsOn: classes) {
	classifier = 'sources'
	from sourceSets.main.allSource
}

publishing {
	publications {
		maven(MavenPublication) {
			groupId 'net.coderbot'
			artifactId "patchwork-eventbus"
			version version

			artifact (jar)
			artifact (sourcesJar)
		}
	}
}

tasks.withType(JavaCompile) {
	options.encoding = "UTF-8"
}
